name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –°–∫—Ä–∏–ø—Ç —Å–ø—Ä–∞—Ü—é—î –ø—Ä–∏ –ø—É—à—ñ –≤ –≥—ñ–ª–∫—É main

permissions:
  contents: write

jobs:
  build-and-deploy:
    concurrency: ci-${{ github.ref }} # –ó–∞–ø–æ–±—ñ–≥–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞–º –ø—Ä–∏ –¥–µ–∫—ñ–ª—å–∫–æ—Ö –¥–µ–ø–ª–æ—è—Ö –æ–¥–Ω–æ—á–∞—Å–Ω–æ
    runs-on: ubuntu-latest

    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v4

      - name: Setup Node.js ‚öôÔ∏è
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'

      - name: Install and Build üîß
        run: |
          npm install
          npm run build
          # –î–æ–¥–∞—î–º–æ .nojekyll, —â–æ–± GitHub –Ω–µ —ñ–≥–Ω–æ—Ä—É–≤–∞–≤ —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–∞–ø–∫–∏ Vite
          touch dist/.nojekyll

      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: dist # –ü–∞–ø–∫–∞, —è–∫—É —Å—Ç–≤–æ—Ä—é—î Vite (npm run build)
          branch: gh-pages # –ì—ñ–ª–∫–∞ –¥–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó —Å–∞–π—Ç—É
          clean: true # –û—á–∏—â–∞—Ç–∏ –≥—ñ–ª–∫—É –ø–µ—Ä–µ–¥ –Ω–æ–≤–∏–º –¥–µ–ø–ª–æ—î–º