import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as b}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getFirestore as y,query as v,collection as E,orderBy as k,limit as I,getDocs as w}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";const h={projectId:"destinycode-982fa",appId:"1:168629222416:web:3283f6a4051f57a85c9e95",storageBucket:"destinycode-982fa.firebasestorage.app",apiKey:"AIzaSyA20BvSogSuHTni09Y54HwmlpG7UKXuxk8",authDomain:"destinycode-982fa.firebaseapp.com",messagingSenderId:"168629222416",measurementId:"G-ZKS4RCNFGX"},B=b(h),L=y(B),S="1536",g="dc_admin_auth";document.getElementById("login-btn").addEventListener("click",u);document.getElementById("password-input").addEventListener("keydown",t=>{t.key==="Enter"&&u()});function u(){document.getElementById("password-input").value===S?(sessionStorage.setItem(g,"true"),document.getElementById("login-screen").classList.add("hidden"),document.getElementById("admin-content").classList.remove("hidden"),loadFeedback()):alert("Wrong password")}let r=[],m="all";window.filterFeed=t=>{m=t,document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("bg-indigo-600","text-white"),e.classList.add("bg-slate-700","text-slate-300")});const s=document.getElementById(`btn-${t}`);s&&(s.classList.remove("bg-slate-700","text-slate-300"),s.classList.add("bg-indigo-600","text-white")),x()};window.loadFeedback=async()=>{const t=document.getElementById("feedback-container");t.innerHTML='<div class="text-center py-20 text-slate-500 animate-pulse">–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</div>';try{const s=v(E(L,"web_feedback"),k("timestamp","desc"),I(100)),e=await w(s);r=[];let n={total:0,like:0,dislike:0,text:0};e.forEach(i=>{const a=i.data();r.push({id:i.id,...a}),n.total++,a.type==="like"&&n.like++,a.type==="dislike"&&n.dislike++,a.type==="text"&&n.text++}),document.getElementById("stat-total").innerText=n.total,document.getElementById("stat-likes").innerText=n.like,document.getElementById("stat-dislikes").innerText=n.dislike,document.getElementById("stat-text").innerText=n.text,x()}catch(s){t.innerHTML=`<div class="text-red-500 text-center">Error: ${s.message}</div>`,console.error(s)}};function x(){const t=document.getElementById("feedback-container");t.innerHTML="";const s=m==="all"?r:r.filter(e=>e.type===m);if(s.length===0){t.innerHTML='<div class="text-center py-10 text-slate-600">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üçÉ</div>';return}s.forEach(e=>{const n=e.timestamp?new Date(e.timestamp.seconds*1e3).toLocaleString("uk-UA"):"No Date",i=e.email||"Anonymous",a=e.source||"unknown";let c="";a==="free_report"&&(c='<span class="px-1.5 py-0.5 rounded text-[10px] font-bold bg-slate-600 text-white ml-2">FREE REPORT</span>'),a==="premium_report"&&(c='<span class="px-1.5 py-0.5 rounded text-[10px] font-bold bg-amber-500 text-black ml-2">PREMIUM REPORT</span>');let d="‚ùì",l="border-slate-700",o="bg-slate-800/50";e.type==="like"&&(d="üëç",l="border-green-500/30",o="bg-green-900/10"),e.type==="dislike"&&(d="üëé",l="border-red-500/30",o="bg-red-900/10"),e.type==="text"&&(d="üí¨",l="border-indigo-500/50",o="bg-indigo-900/10");const f=e.type==="text"?`<div class="mt-2 text-white bg-slate-900/50 p-3 rounded border border-slate-700 text-sm whitespace-pre-wrap">${T(e.value)}</div>`:`<div class="text-slate-500 text-sm italic mt-1">–û—Ü—ñ–Ω–∫–∞: ${e.value}</div>`,p=document.createElement("div");p.className=`card rounded-lg p-4 border ${l} ${o} transition hover:bg-slate-800`,p.innerHTML=`
                    <div class="flex justify-between items-start">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">${d}</span>
                            <div>
                                <div class="font-bold text-slate-200 text-sm flex items-center">
                                    ${i} ${c}
                                </div>
                                <div class="text-xs text-slate-500">${n}</div>
                            </div>
                        </div>
                        <span class="text-xs px-2 py-1 bg-slate-900 rounded text-slate-400 capitalize">${e.type}</span>
                    </div>
                    ${f}
                `,t.appendChild(p)})}function T(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}sessionStorage.getItem(g)==="true"&&(document.getElementById("login-screen").classList.add("hidden"),document.getElementById("admin-content").classList.remove("hidden"),loadFeedback());
